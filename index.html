<!doctype html>
<title>jp-object demo</title>
<style>
body {
;	margin			: 32px
}
.jp-object-undefined::before {
;	content			: 'undefined'
;	color			: red
}
.jp-object-String::before, .jp-object-String::after {
;	content			: '"'
}
.jp-object-key-name {
;	width			: 64px
}
.jp-object-key-name::placeholder {
;	color			: green
}

jp-object > a {
;	color			: blue
}
jp-object > a::before {
;	content			: '('
}
jp-object > a::after {
;	content			: ') ▹ '
}
jp-object[ open ] > a::after {
;	content			: ') ▿ '
}

jp-object > div {
;	padding-left	: 1em
}
jp-object .jp-object-key::after {
;	content			: ':'
}
jp-object[ removable ] .jp-object-key::before {
;	color			: red
;	content			: '× '
}
</style>

<h2>STATICs</h2>
<jp-object				editable appendable removable></jp-object><br>
<jp-object json=null	editable appendable removable></jp-object><br>
<jp-object json=true	editable appendable removable></jp-object><br>
<jp-object json=false	editable appendable removable></jp-object><br>
<jp-object json=0		editable appendable removable></jp-object><br>
<jp-object json=123		editable appendable removable></jp-object><br>
<jp-object json='""'	editable appendable removable></jp-object><br>
<jp-object json='"ABC"'	editable appendable removable></jp-object><br>
<jp-object
	editable appendable removable
	json='{
		"jockeys": {
			"05339": {
				"name"		: "Christophe Patrice Lemaire"
			,	"birthday"	: 19790520
			}
		,	"05212": {
				"name"		: "Mirco Demuro"
			,	"birthday"	: 19790111
			}
		}
	,	"races": [
			{	"date"		:	20181125
			,	"name"		: "Japan Cup"
			,	"grade"		: "G1"
			,	"horses"	: [ "Almond Eye" ]
			}
		,	{	"date"		:	20181125
			,	"name"		: "Keihan Hai"
			,	"grade"		: "G3"
			,	"horses"	: [ "Danon Smash" ]
			}
		,	{	"date"		:	20190120
			,	"name"		: "Tokai S."
			,	"grade"		: "G2"
			,	"horses"	: [ "Inti" ]
			}
		,	{	"date"		:	20190120
			,	"name"		: "American Jockey Club Cup"
			,	"grade"		: "G2"
			,	"horses"	: [ "Sciacchetra" ]
			}
		]
	}'
></jp-object>

<h2>DYNAMIC</h2>
<script type=module>
	import JPObject from './jp-object.js'

	const AC = _ => document.body.appendChild( _ )
	const CE = _ => document.createElement( _ )

	const $	= new JPObject( 
		{	jockeys: {
				"05339": {
					name: "Christophe Patrice Lemaire"
				,	birthday: 19790520
				}
			,	"05212": {
					name: "Mirco Demuro"
				,	birthday: 19790111
				}
			}
		,	races: [
				{	date:	20181125
				,	name: "Japan Cup"
				,	grade: "G1"
				,	horses: [ "Almond Eye" ]
				}
			,	{	date:	20181125
				,	name: "Keihan Hai"
				,	grade: "G3"
				,	horses: [ "Danon Smash" ]
				}
			,	{	date:	20190120
				,	name: "Tokai S."
				,	grade: "G2"
				,	horses: [ "Inti" ]
				}
			,	{	date:	20190120
				,	name: "American Jockey Club Cup"
				,	grade: "G2"
				,	horses: [ "Sciacchetra" ]
				}
			]
		}
	)
	$.setAttribute( 'open'		, '' )
	$.setAttribute( 'editable'	, '' )
	$.setAttribute( 'appendable', '' )
	$.setAttribute( 'removable'	, '' )
	AC( $ )

	AC( CE( 'br' ) )
	const button = AC( CE( 'button' ) )
	button.textContent = 'EXPORT'
	button.onclick = () => console.log( JSON.stringify( $.$, null, '\t' ) ) 

	const elements = Array.from( document.getElementsByTagName( 'jp-object' ) )
	const filtered = elements.filter( _ => _.ParentAndKey === void 0 )
	filtered.forEach(
		_ => _.Broadcaster = _ => console.log( JSON.stringify( _.$, null, '\t' ) ) 
	)
</script>

